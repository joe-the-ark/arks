var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(a,n){function s(e){try{h(r.next(e))}catch(t){n(t)}}function o(e){try{h(r["throw"](e))}catch(t){n(t)}}function h(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(s,o)}h((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return r([e,t])}}function r(i){if(a)throw new TypeError("Generator is already executing.");for(;h;)try{if(a=1,n&&(s=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(n,i[1])).done)return s;switch(n=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,n=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){h.label=i[1];break}if(6===i[0]&&h.label<s[1]){h.label=s[1],s=i;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(i);break}s[2]&&h.ops.pop(),h.trys.pop();continue}i=t.call(e,h)}catch(r){i=[6,r],n=0}finally{a=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var a,n,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},game;!function(e){var t=function(t){function i(i,r,a,n,s,o){var h=t.call(this)||this;h.playerList=[],h.game_secret="",h.player="",h.gameName="",h.inviter="",h.stageWidth=0,h.stageHeight=0,h.characterTwo="Fully",h.characterOne="Insufficiently",h._touchStatus=!1,h._distance=new egret.Point,h.characterList=[],h.map={},h.game_secret=i,h.player=a,h.gameName=n,h.inviter=r,h.stageWidth=s,h.stageHeight=o,h.sprite=new egret.Sprite,h.sprite.width=s,h.sprite.height=o,h.sprite.x=0,h.sprite.y=0,h.addChild(h.sprite),h.sprite.addEventListener(egret.Event.ADDED_TO_STAGE,h.getPlayList,h),h.rectShapeOne=new egret.Shape,h.rectShapeTwo=new egret.Shape,h.sprite.addChild(h.rectShapeOne),h.sprite.addChild(h.rectShapeTwo),h.drawRect();var c=new egret.TextField;c.text="Insufficiently",c.textAlign=egret.HorizontalAlign.CENTER,c.size=40,c.border=!0,c.width=280,c.borderColor=3825613,c.x=s-390,c.y=200,h.sprite.addChild(c),h._shape=new egret.Shape,h.addChild(h._shape),h.initGraphics(),h.charater2=new egret.TextField,h.sprite.addChild(h.charater2),h.initCharacter(s-390,h.stageHeight-150),h.rightIcon=new egret.Bitmap(RES.getRes("right_png")),h.rightIcon.width=100,h.rightIcon.height=100,h.rightIcon.anchorOffsetX=h.rightIcon.width/2,h.rightIcon.anchorOffsetY=h.rightIcon.height/2,h.rightIcon.x=s-50,h.rightIcon.y=o/2,h.rightIcon.touchEnabled=!0,h.rightIcon.visible=!1,h.addChild(h.rightIcon),h.rightIcon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,h.nextTouch,h),h.closeIcon=new egret.Bitmap(RES.getRes("close-circle_png")),h.closeIcon.width=40,h.closeIcon.height=40,h.closeIcon.anchorOffsetX=h.closeIcon.width/2,h.closeIcon.anchorOffsetY=h.closeIcon.height/2,h.closeIcon.x=s-30,h.closeIcon.y=150,h.closeIcon.touchEnabled=!0,h.closeIcon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,h.closeTip,h),h.addChild(h.closeIcon),h.tiptext=new egret.TextField,h.addChild(h.tiptext);var l=" The ARK is serving the cause of tapping into your teams‘ full potential. Your first task: ANONY- MOUSLY rank your team on this Potentiality Sca- le from 1 to 81.";h.tip(1,50,l,30);var g=new e.ProcessBar(s,o,5,"Inititate > Potential Scale");return h.sprite.addChild(g),h}return __extends(i,t),i.prototype.closeTip=function(){this.tiptext.parent&&this.removeChild(this.tiptext)},i.prototype.nextTouch=function(){this.sprite.numChildren-this.playerList.length-4;if(this.stage){var t=this;base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("save_players_process",{inviter_name:t.inviter,game_secret:t.game_secret,player:t.player,game_name:t.gameName,process:"2.0"}).then(function(i){var r=t.game_secret,a=t.inviter,n=t.player,s=t.gameName,o=t.stageWidth,h=t.stageHeight,c=t.playerList.length,l=new e.CharacterChoosePage(r,a,n,s,o,h,c);t.stage.addChild(l),t.sprite.visible=!1,t.removeChild(t.rightIcon),t.removeChild(t.closeIcon),t.closeTip(),t._shape.visible=!1})}},i.prototype.tip=function(e,t,i,r){var a=this.tiptext;a.x=e,a.y=t,a.text=i,a.size=r,a.width=this.stageWidth},i.prototype.drawRect=function(){var e=this.rectShapeOne;e.graphics.beginFill(3514259,.5),e.graphics.drawRect(0,0,this.stageWidth+60,180),e.graphics.endFill();var t=this.rectShapeTwo;t.graphics.beginFill(3514259,.5),t.graphics.drawRect(0,this.stageHeight-100,this.stageWidth+60,200),t.graphics.endFill()},i.prototype.initGraphics=function(){var e=this._shape;e.graphics.lineStyle(2,16711935),e.graphics.moveTo(this.stageWidth-250,this.stageHeight-150),e.graphics.lineTo(this.stageWidth-250,240)},i.prototype.initCharacter=function(e,t){var i=this.charater2;i.text="Fully",i.textAlign=egret.HorizontalAlign.CENTER,i.size=40,i.border=!0,i.width=280,i.borderColor=3825613,i.x=e,i.y=t},i.prototype.getPlayList=function(){base.API.Init("http://39.104.85.167:8105/api/");var e=this;base.API.call("get_player_list",{game_secret:e.game_secret,gameName:e.gameName,inviter:e.inviter}).then(function(t){var i=this;e.playerList=t.player_list,console.log(e.playerList),e.playerList.forEach(function(t,r,a){if(t==e.player){var n=new egret.TextField;n.text=t,n.textAlign=egret.HorizontalAlign.CENTER,n.size=30,n.lineSpacing=10,n.touchEnabled=!0,n.border=!0,18*t.length<100?n.width=100:n.width=18*t.length,n.borderColor=65280,n.x=70,n.y=300+50*r;var s=new egret.TextField;s.text="",s.size=30,s.border=!0,s.width=50,s.borderColor=65280,s.textAlign=egret.HorizontalAlign.CENTER,n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(t){e._touchStatus=!0;var r=t.stageX,a=n.x,o=n.y,h=t.stageY;n.addEventListener(egret.TouchEvent.TOUCH_MOVE,function(t){if(e._touchStatus){n.x=t.stageX-r+a,n.y=t.stageY-h+o,s.parent&&s.parent.removeChild(s);var i=100;if(n.width>100&&(i=n.width),n.x>e.stageWidth-250-i&&(n.x=e.stageWidth-250-i,n.y>240&&n.y<e.stageHeight-150-n.height)){s.x=n.x+i,s.y=n.y;var c=(e.stageHeight-150-240-n.height)/81;s.text=Math.ceil((s.y-240)/c).toString(),e.sprite.addChild(s);var l=Math.ceil((s.y-240)/c).toString(),g=n.text;e.map[g]=l,e.rightIcon.visible=!0}n.y>e.stageHeight-150-n.height&&(n.y=e.stageHeight-150-n.height)}},i)},i),n.addEventListener(egret.TouchEvent.TOUCH_END,function(t){e._touchStatus=!1,n.removeEventListener(egret.TouchEvent.TOUCH_MOVE,i.mouseMove,i)},i),e.sprite.addChild(n)}})})},i}(egret.DisplayObjectContainer);e.GamePageOne=t,__reflect(t.prototype,"game.GamePageOne")}(game||(game={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var base;!function(e){var t=function(){function e(e){this.baseUrl=e}return e.Init=function(t){e.instance=new e(t)},e.call=function(e,t){return __awaiter(this,void 0,void 0,function(){var i,r=this;return __generator(this,function(a){return i=new Promise(function(i,a){var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),n.open(r.instance.baseUrl+e+"/","POST"),n.send(JSON.stringify(t)),n.addEventListener(egret.Event.COMPLETE,function(e){var t=JSON.parse(n.response);t.success?i(t.result):a({code:t.code,msg:t.msg})},r)}),[2,i]})})},e.instance=null,e}();e.API=t,__reflect(t.prototype,"base.API")}(base||(base={}));var base;!function(e){var t=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function r(r){t.call(i,r,e)}var a=RES.getRes(e);a?r(a):RES.getResAsync(e,r,this)},e}();e.AssetAdapter=t,__reflect(t.prototype,"base.AssetAdapter",["eui.IAssetAdapter"])}(base||(base={}));var Button=function(e){function t(t,i){var r=e.call(this)||this,a=new eui.Group;a.width=t,a.height=i,r.addChild(a);var n=new eui.VerticalLayout;n.gap=30,n.verticalAlign=egret.VerticalAlign.MIDDLE,n.horizontalAlign=egret.HorizontalAlign.CENTER,a.layout=n;var s=new egret.Shape;s.graphics.beginFill(13378065),s.graphics.drawCircle(12,12,6),s.graphics.endFill(),r._icon=s;var o=new egret.RenderTexture;o.drawToTexture(s);var h=new eui.Button;return h.label="按钮",h.icon=o,h.addEventListener(egret.TouchEvent.TOUCH_TAP,r.onTouch,r),a.addChild(h),r}return __extends(t,e),t.prototype.onTouch=function(e){var t=e.target,i=new egret.RenderTexture;switch(i.drawToTexture(this._icon),e.type){case egret.TouchEvent.TOUCH_BEGIN:t.icon=i;break;case egret.TouchEvent.TOUCH_END:t.icon=null}},t}(eui.UILayer);__reflect(Button.prototype,"Button");var base;!function(e){var t=function(){function e(){}return e.prototype.getTheme=function(e,t,i,r){function a(e){t.call(r,e)}function n(t){t.resItem.url===e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),i.call(r))}var s=this;"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(r,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(e,i){window.JSONParseClass.setData(e),a(e),egret.callLater(function(){t.call(r,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT))},e}();e.ThemeAdapter=t,__reflect(t.prototype,"base.ThemeAdapter",["eui.IThemeAdapter"])}(base||(base={}));var game;!function(e){var t=function(t){function i(i,r,a,n,s,o,h,c){var l=t.call(this)||this;l.playerList=[],l.game_secret="",l.player="",l.gameName="",l.inviter="",l.characterTwo="",l.characterOne="",l.stageWidth=0,l.stageHeight=0,l._touchStatus=!1,l._distance=new egret.Point,l.characterList=[],l.characterListParams=[],l.charaChooser=[],l.map={},l.game_secret=i,l.player=a,l.gameName=n,l.inviter=r,l.count=h,l.characterListParams=c,l.characterList=c[1],l.charaChooser=c[0],l.characterTwo=l.characterList[h][1],l.characterOne=l.characterList[h][0],l.stageWidth=s,l.stageHeight=o,l.sprite=new egret.Sprite,l.sprite.width=s,l.sprite.height=o,l.sprite.x=0,l.sprite.y=0,l.addChild(l.sprite),l.sprite.addEventListener(egret.Event.ADDED_TO_STAGE,l.getPlayList,l),l.rectShapeOne=new egret.Shape,l.rectShapeTwo=new egret.Shape,l.sprite.addChild(l.rectShapeOne),l.sprite.addChild(l.rectShapeTwo),l.drawRect(),l._shape=new egret.Shape,l.addChild(l._shape),l.initGraphics(),l.charater1=new egret.TextField,l.sprite.addChild(l.charater1),l.initCharacter1(s-390,200),l.charater2=new egret.TextField,l.sprite.addChild(l.charater2),l.initCharacter(s-390,l.stageHeight-150),l.rightIcon=new egret.Bitmap(RES.getRes("right_png")),l.rightIcon.width=100,l.rightIcon.height=100,l.rightIcon.anchorOffsetX=l.rightIcon.width/2,l.rightIcon.anchorOffsetY=l.rightIcon.height/2,l.rightIcon.x=s-50,l.rightIcon.y=o/2,l.addChild(l.rightIcon),l.rightIcon.touchEnabled=!0,l.rightIcon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,l.nextTouch,l),l.closeIcon=new egret.Bitmap(RES.getRes("close-circle_png")),l.closeIcon.width=40,l.closeIcon.height=40,l.closeIcon.anchorOffsetX=l.closeIcon.width/2,l.closeIcon.anchorOffsetY=l.closeIcon.height/2,l.closeIcon.x=s-30,l.closeIcon.y=150,l.closeIcon.touchEnabled=!0,l.closeIcon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,l.closeTip,l),l.addChild(l.closeIcon),l.tiptext=new egret.TextField;var g=Math.ceil((h+1)/l.charaChooser.length*65+20),d=new e.ProcessBar(s,o,g,"Mission 1 > Vote Tension Scale");return l.sprite.addChild(d),l}return __extends(i,t),i.prototype.closeTip=function(){this.tiptext.parent&&this.removeChild(this.tiptext)},i.prototype.nextTouch=function(){var t=this.sprite.numChildren-this.playerList.length-5;if(this.playerList.length==t){var i=this.game_secret,r=this.inviter,a=this.player,n=this.gameName,s=this.stageWidth,o=this.stageHeight;if(this.count+1==this.characterList.length){console.log("打分结束"),base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("set_player_score",{params:this.map,inviter_name:this.inviter,gameSecret:this.game_secret,player:this.player,gameName:this.gameName,charaChooser:this.charaChooser[this.count],characterOne:this.characterOne,characterTwo:this.characterTwo}).then(function(e){console.log(e)}),console.log("所有性格打分结束");var h=this;base.API.call("save_players_process",{inviter_name:h.inviter,game_secret:h.game_secret,player:h.player,game_name:h.gameName,process:"4.0"}).then(function(t){var c=new e.TensionScaleResult(s,o,r,i,a,n,h.characterListParams,h.count+1);h.stage.addChild(c),h.sprite.visible=!1,h._shape.visible=!1,h.rightIcon.visible=!1})}else{console.log("打分结束"),base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("set_player_score",{params:this.map,inviter_name:this.inviter,gameSecret:this.game_secret,player:this.player,gameName:this.gameName,charaChooser:this.charaChooser[this.count],characterOne:this.characterOne,characterTwo:this.characterTwo}).then(function(e){console.log(e)}),this.count+=1;var h=this,c="3."+h.count.toString();base.API.call("save_players_process",{inviter_name:h.inviter,game_secret:h.game_secret,player:h.player,game_name:h.gameName,process:c}).then(function(t){var c=new e.Character(i,r,a,n,s,o,h.count,h.characterListParams);h.sprite.visible=!1,h.removeChild(h.rightIcon),h.removeChild(h.closeIcon),h._shape.visible=!1,h.stage.addChild(c),h.tiptext.text=""})}}else this.addChild(this.tiptext),this.tip(100,100,"Everyone must be graded!")},i.prototype.tip=function(e,t,i){var r=this.tiptext;r.x=e,r.y=t,r.text=i,r.size=40,r.width=this.stageWidth},i.prototype.drawRect=function(){var e=this.rectShapeOne;e.graphics.beginFill(3514259,.5),e.graphics.drawRect(0,0,this.stageWidth+60,180),e.graphics.endFill();var t=this.rectShapeTwo;t.graphics.beginFill(3514259,.5),t.graphics.drawRect(0,this.stageHeight-100,this.stageWidth+60,200),t.graphics.endFill()},i.prototype.initGraphics=function(){var e=this._shape;e.graphics.lineStyle(2,16711935),e.graphics.moveTo(this.stageWidth-250,this.stageHeight-150),e.graphics.lineTo(this.stageWidth-250,240)},i.prototype.initCharacter=function(e,t){var i=this.charater2;i.text=this.characterTwo,i.textAlign=egret.HorizontalAlign.CENTER,i.size=40,i.border=!0,i.width=280,i.borderColor=3825613,i.x=e,i.y=t},i.prototype.initCharacter1=function(e,t){var i=this.charater1;i.text=this.characterOne,i.textAlign=egret.HorizontalAlign.CENTER,i.size=40,i.border=!0,i.width=280,i.borderColor=3825613,i.x=e,i.y=t},i.prototype.getPlayList=function(){base.API.Init("http://39.104.85.167:8105/api/");var e=this;base.API.call("get_player_list",{game_secret:e.game_secret,gameName:e.gameName,inviter:e.inviter}).then(function(t){var i=this;e.playerList=t.player_list,e.playerList.forEach(function(t,r,a){var n=new egret.TextField;n.text=t,n.textAlign=egret.HorizontalAlign.CENTER,n.size=30,n.lineSpacing=10,n.touchEnabled=!0,n.border=!0,18*t.length<100?n.width=100:n.width=18*t.length,n.borderColor=65280,n.x=70,n.y=300+50*r;var s=new egret.TextField;s.text="",s.size=30,s.border=!0,s.width=50,s.borderColor=65280,s.textAlign=egret.HorizontalAlign.CENTER,n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(t){e._touchStatus=!0;var r=t.stageX,a=n.x,o=n.y,h=t.stageY;n.addEventListener(egret.TouchEvent.TOUCH_MOVE,function(t){if(e._touchStatus){n.x=t.stageX-r+a,n.y=t.stageY-h+o,s.parent&&s.parent.removeChild(s);var i=100;if(n.width>100&&(i=n.width),n.x>e.stageWidth-250-i&&(n.x=e.stageWidth-250-i,n.y>240&&n.y<e.stageHeight-150-n.height)){s.x=n.x+i,s.y=n.y;var c=(e.stageHeight-150-240-n.height)/81;s.text=Math.ceil((s.y-240)/c).toString(),e.sprite.addChild(s);var l=Math.ceil((s.y-240)/c).toString(),g=n.text;e.map[g]=l,console.log(e.map)}n.y>e.stageHeight-150-n.height&&(n.y=e.stageHeight-150-n.height)}},i)},i),n.addEventListener(egret.TouchEvent.TOUCH_END,function(t){e._touchStatus=!1,n.removeEventListener(egret.TouchEvent.TOUCH_MOVE,i.mouseMove,i)},i),e.sprite.addChild(n)})})},i.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},i.prototype.onTouchMove=function(){egret.log("onTouchMove")},i.prototype.onTouchTap=function(){egret.log("onTouchTap")},i}(egret.DisplayObjectContainer);e.Character=t,__reflect(t.prototype,"game.Character")}(game||(game={}));var game;!function(e){var t=function(t){function i(i,r,a,n,s,o,h){var c=t.call(this)||this;c.unselectedCharacterList=[],c.selectedChaeacterList=[],c.game_secret="",c.gameName="",c.inviter="",c.player="",c.stageWidth=0,c.stageHeight=0,c.count=0,c._touchStatus=!1,c.select_list=[],c.playerCount=0,c.playerList=[],c.flag1=0,c.flag2=0,c.characterList=[],c.allcharacterlist=[],c.chooseText=[],c.stageWidth=s,c.stageHeight=o,c.player=a,c.gameName=n,c.game_secret=i,c.inviter=r,c.playerCount=h,c.sprite=new egret.Sprite,c.addChild(c.sprite),c.sprite.touchEnabled=!0,c.titleBackground=new egret.Shape,c.sprite.addChild(c.titleBackground),c.drawTitleBackground(),c.createTitle(),c.getCharacterList(),c.drawSplitLine(),c.confirmButton=new egret.Shape,c.confirmButton.graphics.beginFill(52224),c.confirmButton.graphics.drawRect(0,0,200,50),c.confirmButton.graphics.endFill(),c.confirmButton.y=230,c.confirmButton.x=100,c.confirmButton.touchEnabled=!0,c.confirmButton.addEventListener(egret.TouchEvent.TOUCH_TAP,c.addTensionScale,c),c.confirmText=new egret.TextField,c.confirmText.text="Confirm",c.confirmText.size=30,c.confirmText.x=c.confirmButton.x+50,c.confirmText.y=c.confirmButton.y+10,c.sprite.addChild(c.confirmButton),c.sprite.addChild(c.confirmText),c.confirmText.visible=!1,c.confirmButton.visible=!1,c.rightIcon=new egret.Bitmap(RES.getRes("right_png")),c.rightIcon.width=100,c.rightIcon.height=100,c.rightIcon.anchorOffsetX=c.rightIcon.width/2,c.rightIcon.anchorOffsetY=c.rightIcon.height/2,c.rightIcon.x=s-50,c.rightIcon.y=o-100,c.rightIcon.touchEnabled=!0,c.rightIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,c.rightNext,c),c.chooseone=new egret.TextField,c.chooseone.textAlign=egret.HorizontalAlign.CENTER,c.chooseone.textAlign=egret.VerticalAlign.MIDDLE,c.chooseone.size=30,c.chooseone.text="point & click",c.chooseone.lineSpacing=10,c.chooseone.border=!0,c.chooseone.width=190,c.chooseone.borderColor=3825613,c.chooseone.height=40,c.chooseone.y=170,c.chooseone.touchEnabled=!0,c.chooseone.addEventListener(egret.TouchEvent.TOUCH_TAP,c.touchone,c),c.sprite.addChild(c.chooseone),c.choosetwo=new egret.TextField,c.choosetwo.textAlign=egret.HorizontalAlign.CENTER,c.chooseone.textAlign=egret.VerticalAlign.BOTTOM,c.choosetwo.size=30,c.choosetwo.lineSpacing=10,c.choosetwo.text="point & click",c.choosetwo.border=!0,c.choosetwo.width=190,c.choosetwo.borderColor=3825613,c.choosetwo.height=40,c.choosetwo.y=170,c.choosetwo.x=210,c.choosetwo.touchEnabled=!0,c.choosetwo.addEventListener(egret.TouchEvent.TOUCH_TAP,c.touchtwo,c),c.sprite.addChild(c.choosetwo),c.timer=new egret.Timer(1e3,0),c.timer.addEventListener(egret.TimerEvent.TIMER,c.getPlayerCharacterList,c),c.timer.start();var l=new e.ProcessBar(s,o,20,"Mission 1 > Tension Scales");return c.sprite.addChild(l),c.createScrollableCharacterList(),c}return __extends(i,t),i.prototype.touchone=function(){if(this.chooseText[0]){this.chooseone.text="";var e=new egret.TextField;e.text=this.chooseText[0],e.textAlign=egret.HorizontalAlign.CENTER,e.size=30,e.lineSpacing=10,e.border=!0,e.width=this.chooseone.width,e.height=this.chooseone.height,e.background=!0,e.borderColor=6513507,e.backgroundColor=7434694,e.x=this.chooseone.x,e.y=this.chooseone.y,this.sprite.addChild(e)}},i.prototype.touchtwo=function(){if(this.chooseText[1]){this.choosetwo.text="";var e=new egret.TextField;e.text=this.chooseText[1],e.textAlign=egret.HorizontalAlign.CENTER,e.size=30,e.lineSpacing=10,e.border=!0,e.width=this.choosetwo.width,e.height=this.choosetwo.height,e.background=!0,e.borderColor=6513507,e.backgroundColor=7434694,e.x=this.choosetwo.x,e.y=this.choosetwo.y,this.sprite.addChild(e),this.confirmButton.visible=!0,this.confirmText.visible=!0}},i.prototype.rightNext=function(){var t=this;base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("save_players_process",{inviter_name:t.inviter,game_secret:t.game_secret,player:t.player,game_name:t.gameName,process:"3.0"}).then(function(i){if(t.stage){var r=t.game_secret,a=t.inviter,n=t.player,s=t.gameName,o=t.stageWidth,h=t.stageHeight,c=0,l=new e.Character(r,a,n,s,o,h,c,t.characterList);t.stage.addChild(l),t.sprite.visible=!1,t.rightIcon.visible=!1}})},i.prototype.getPlayerCharacterList=function(){var t=this;base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("get_player_characterlist",{game_secret:t.game_secret,inviter:t.inviter,player:t.player,gameName:t.gameName}).then(function(i){var r=i.data;r.forEach(function(i,r,a){var n=i[0];if(-1==t.playerList.indexOf(n)){t.count++;var s=new e.TensionScale(t.stageWidth,t.stageHeight,i[1],0,0,0,0);t.allcharacterlist.push(i[1]),t.sprite.addChild(s),s.x=t.stageWidth-200,s.y=150*t.count,t.playerList.push(n)}}),t.count==t.playerCount&&(t.characterList.push(t.playerList),t.characterList.push(t.allcharacterlist),t.addChild(t.rightIcon),t.timer.stop())})},i.prototype.startGame=function(t,i,r){if(this.stage){var a=new e.EnterGame(t,i,r,this.stage.stageWidth,this.stage.stageHeight);this.stage.addChild(a),this.sprite.visible=!1,this.label.visible=!1}},i.prototype.drawTitleBackground=function(){var e=this.titleBackground;e.graphics.beginFill(3514259,.5),e.graphics.drawRect(0,0,this.stageWidth,130),e.graphics.endFill()},i.prototype.createTitle=function(){var e=new egret.TextField;e.text="Task: screen through the list and name the twosomes of formative tensions that unite, seperate and define the organizing dynamics in your team.",e.size=25,e.width=this.stageWidth,e.x=320-e.textWidth/2,e.y=50,this.sprite.addChild(e)},i.prototype.drawSplitLine=function(){var e=new egret.Shape;e.graphics.lineStyle(2,16777215),e.graphics.moveTo(400,this.stageHeight),e.graphics.lineTo(400,130),e.graphics.endFill(),this.sprite.addChild(e)},i.prototype.getCharacterList=function(){base.API.Init("http://39.104.85.167:8105/api/");var e=this;base.API.call("get_character_list",{}).then(function(t){e.unselectedCharacterList=t.characters,e.unselectedCharacterList.forEach(function(e,t,i){})})},i.prototype.createScrollableCharacterList=function(){var e=new eui.Group,t='\n            <e:Skin xmlns:e="http://ns.egret.com/eui" states="up,down" height="50">\n                <e:Label text="{data}" textColor.down="0xFFFFFF" textColor.up="0x666666" horizontalCenter="0" verticalCenter="0"/> \n            </e:Skin>',i=new eui.List;i.dataProvider=new eui.ArrayCollection(["accuracy","adventurousness","altruism","ambition","autonomy","avant-garde","beauty","carefulness","change","commitment","companionship","composure","connectedness","control","conviviality","cordiality","courage","creativity","curative","curiosity","development","dirruption","dominance","economy","efficiency","effort","effortlessness","ego","elitism","enforcement","fairness","family","fantasy","fighting","flexibility","freedom","generosity","glory","harmony","health","honor","humanity","humor","invasiveness","joy","learning","logic","loyalty","mindfulness","narcissism","nostalgia","obedience","openness","originality","pain","passion","patience","performance","persistence","pleasure","power","pride","purity","quality","rank","reliability","responsibility","role","security","sensuality","spontaneity","submission","sustainability","thrill","tolerance","tradition","trust","truth","winning"]),i.itemRendererSkinName=t,i.allowMultipleSelection=!0,e.addChild(i),this.list=i,i.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this);var r=new eui.Scroller;r.width=300,r.height=700,r.x=75,r.y=300,r.viewport=e,this.sprite.addChild(r)},i.prototype.onChange=function(e){console.log("已选中的性格："+this.list.selectedItems),2==this.list.selectedItems.length&&(this.list.touchEnabled=!1,console.log("当前选中的索引列表长度："+this.list.selectedIndices.length))},i.prototype.onTouchCancel=function(e){this.list.selectedItem.length>=2&&this.list.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onChange,this)},i.prototype.addTensionScale=function(){var t=this;if((this.select_list.length=2)&&(base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("save_character_choose",{inviterName:t.inviter,gameSecret:t.game_secret,playerName:t.player,gameName:t.gameName,charaChooser:t.select_list}).then(function(e){t.confirmButton.touchEnabled=!1})),this.stage){var i=new e.TensionScale(this.stageWidth,this.stageHeight,this.select_list,0,0,0,0);console.log(i),this.sprite.addChild(i),i.x=this.stageWidth-200,i.y=150*(this.count+1)}},i.prototype.onTouchBegin=function(){if(this.stage){var t=new e.CreateGame(this.stage.stageWidth,this.stage.stageHeight);this.stage.addChild(t),this.sprite.visible=!1,this.label.visible=!1}},i.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},i.prototype.onTouchMove=function(){egret.log("onTouchMove")},i.prototype.onTouchTap=function(){egret.log("onTouchTap")},i}(egret.DisplayObjectContainer);e.CharacterChoosePage=t,__reflect(t.prototype,"game.CharacterChoosePage");var i=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){for(var e=[],t=1;5>t;t++)e.push({label:"item"+t});var i=new eui.ArrayCollection(e),a=new eui.DataGroup;a.dataProvider=i,this.addChild(a);a.itemRenderer=r},t}(eui.Group);e.ItemRendererDemo=i,__reflect(i.prototype,"game.ItemRendererDemo");var r=function(e){function t(){var t=e.call(this)||this;t.touchChildren=!0;new eui.Image("resource/assets/frame.png");return t.labelDisplay=new eui.Label,t.labelDisplay.textColor=16580608,t.addChild(t.labelDisplay),t}return __extends(t,e),t.prototype.dataChanged=function(){this.labelDisplay.text=this.data.label},t}(eui.ItemRenderer);e.LabelRenderer=r,__reflect(r.prototype,"game.LabelRenderer")}(game||(game={}));var game;!function(e){var t=function(t){function i(e,i){var r=t.call(this)||this;r.count=0,r.playerList=[],r.sprite=new egret.Sprite,r.sprite.width=e,r.sprite.height=i,r.addChild(r.sprite);var a=new egret.Shape;a.graphics.beginFill(16774638),a.graphics.drawRect(0,0,300,50),a.graphics.endFill(),a.x=r.sprite.width/2+60,a.y=r.sprite.height/3,a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,r.sprite.addChild(a),r.txInput=new egret.TextField,r.txInput.type=egret.TextFieldType.INPUT,r.txInput.inputType=egret.TextFieldInputType.TEXT,r.txInput.width=290,r.txInput.height=50,r.txInput.x=r.sprite.width/2+60,r.txInput.y=r.sprite.height/3,r.txInput.anchorOffsetX=r.txInput.width/2,r.txInput.anchorOffsetY=r.txInput.height/2,r.txInput.textColor=855309,r.txInput.size=40;var n=new egret.TextField;n.text="password:",n.x=r.sprite.width/2-280,n.y=r.sprite.height/3-18,n.size=30,r.sprite.addChild(n),r.sprite.addChild(r.txInput);var s=new egret.Shape;s.graphics.beginFill(16774638),s.graphics.drawRect(0,0,300,50),s.graphics.endFill(),s.x=r.sprite.width/2+60,s.y=r.sprite.height/3-80,s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,r.sprite.addChild(s);var o=new egret.Shape;o.graphics.beginFill(16774638),o.graphics.drawRect(0,0,300,50),o.graphics.endFill(),o.x=r.sprite.width/2+60,o.y=r.sprite.height/3-160,o.anchorOffsetX=s.width/2,o.anchorOffsetY=s.height/2,r.sprite.addChild(o),r.txInput2=new egret.TextField,r.txInput2.type=egret.TextFieldType.INPUT,r.txInput2.inputType=egret.TextFieldInputType.TEXT,r.txInput2.width=290,r.txInput2.height=50,r.txInput2.x=r.sprite.width/2+60,r.txInput2.y=r.sprite.height/3-75,r.txInput2.anchorOffsetX=r.txInput2.width/2,r.txInput2.anchorOffsetY=r.txInput2.height/2,r.txInput2.textColor=855309,r.txInput2.size=40;var h=new egret.TextField;h.text="game name:",h.x=r.sprite.width/2-280,h.y=r.sprite.height/3-90,h.size=30,r.sprite.addChild(h),r.sprite.addChild(r.txInput2),r.txInput3=new egret.TextField,r.txInput3.type=egret.TextFieldType.INPUT,r.txInput3.inputType=egret.TextFieldInputType.TEXT,r.txInput3.width=290,r.txInput3.height=50,r.txInput3.x=r.sprite.width/2+60,r.txInput3.y=r.sprite.height/3-150,r.txInput3.anchorOffsetX=r.txInput3.width/2,r.txInput3.anchorOffsetY=r.txInput3.height/2,r.txInput3.textColor=855309,r.txInput3.size=40;var c=new egret.TextField;c.text="your name:",c.x=r.sprite.width/2-280,c.y=r.sprite.height/3-170,c.size=30,r.sprite.addChild(c),r.sprite.addChild(r.txInput3);var l=new egret.Shape;l.graphics.beginFill(52224),l.graphics.drawRect(0,0,200,50),l.graphics.endFill(),l.x=r.sprite.width/2,l.y=r.sprite.height/2,l.anchorOffsetX=l.width/2,l.anchorOffsetY=l.height/2,l.touchEnabled=!0,l.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.invateFriends,r),r.sprite.addChild(l);var g=new egret.TextField;return g.text="create",g.anchorOffsetX=g.width/2,g.anchorOffsetY=g.height/2,g.x=r.sprite.width/2,g.y=r.sprite.height/2,r.sprite.addChild(g),r.text2=new egret.TextField,r.text2.width=e,r.sprite.addChild(r.text2),r}return __extends(i,t),i.prototype.invateFriends=function(){console.log(1);var e=window.location.href;console.log("link:"),console.log(e),base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("wechatapi",{url:e}).then(function(t){console.log(t);var i=new BodyConfig;i.debug=!0,i.appId=t.params.appId,i.timestamp=t.params.timestamp,i.nonceStr=t.params.nonceStr,i.jsApiList=t.params.jsApiList,i.signature=t.params.signature,wx&&(wx.config(i),wx.ready(function(){console.log(12),wx.checkJsApi({jsApiList:["onMenuShareAppMessage","checkJsApi"],success:function(e){console.log(333),console.log(e),alert(e)}}),wx.onMenuShareAppMessage({title:"ARK",desc:"123",link:e,imgUrl:"",type:"",dataUrl:"",trigger:function(){console.log("trigger")},success:function(){alert("分享完成"),console.log("success")},cancel:function(){alert("淘气了哦，你取消分享"),console.log("cancel")},fail:function(e){console.log(e),console.log("fail")}})}),wx.error(function(e){console.log("error"),console.log(e)}))})["catch"](function(e){console.log(e)})},i.prototype.onTouchBegin=function(){var t=this.txInput3.text,i=this.txInput2.text,r=this.txInput.text;if(t&&i&&r){if(base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("create_game",{inviter:t,gameName:i,game_id:r}).then(function(e){})["catch"](function(e){console.log(e)}),this.stage){var a=new e.InviteFriends(r,t,i,this.stage.stageWidth,this.stage.stageHeight);this.stage.addChild(a),this.sprite.visible=!1}}else this.text2.text="you must input your name , the game's name and the game_id"},i.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},i.prototype.onTouchMove=function(){egret.log("onTouchMove")},i.prototype.onTouchTap=function(){egret.log("onTouchTap")},i}(egret.DisplayObjectContainer);e.CreateGame=t,__reflect(t.prototype,"game.CreateGame")}(game||(game={}));var game;!function(e){var t=function(t){function i(e,i,r,a,n){var s=t.call(this)||this;s.count=0,s.playerList=[],s.game_secret="",s.gameName="",s.isPlayer=0,s.inviter="",s.player="",s.allcharacterlist=[],s.playerCount=0,s.characterList=[],s.stageWidth=0,s.stageHeight=0,s.game_secret=e,s.gameName=i,s.inviter=r,s.sprite=new egret.Sprite,s.stageHeight=n,s.stageWidth=a,s.sprite.width=a,s.sprite.height=n,s.addChild(s.sprite);var o=new egret.Shape;
o.graphics.beginFill(16774638),o.graphics.drawRect(0,0,300,50),o.graphics.endFill(),o.x=s.sprite.width/2+80,o.y=s.sprite.height/3,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,s.sprite.addChild(o);var h=new egret.Shape;h.graphics.beginFill(16774638),h.graphics.drawRect(0,0,300,50),h.graphics.endFill(),h.x=s.sprite.width/2+80,h.y=s.sprite.height/3-100,h.anchorOffsetX=h.width/2,h.anchorOffsetY=h.height/2,s.sprite.addChild(h),s.txInput2=new egret.TextField,s.txInput2.type=egret.TextFieldType.INPUT,s.txInput2.inputType=egret.TextFieldInputType.TEXT,s.txInput2.width=290,s.txInput2.height=50,s.txInput2.x=s.sprite.width/2+80,s.txInput2.y=s.sprite.height/3-100,s.txInput2.anchorOffsetX=s.txInput2.width/2,s.txInput2.anchorOffsetY=s.txInput2.height/2,s.txInput2.textColor=855309,s.txInput2.size=40;var c=new egret.TextField;c.text="input password:",c.x=s.sprite.width/2-320,c.y=s.sprite.height/3-118,c.size=30,s.sprite.addChild(c),s.sprite.addChild(s.txInput2),s.txInput=new egret.TextField,s.txInput.type=egret.TextFieldType.INPUT,s.txInput.inputType=egret.TextFieldInputType.TEXT,s.txInput.width=290,s.txInput.height=50,s.txInput.x=s.sprite.width/2+80,s.txInput.y=s.sprite.height/3,s.txInput.anchorOffsetX=s.txInput.width/2,s.txInput.anchorOffsetY=s.txInput.height/2,s.txInput.textColor=855309,s.txInput.size=40;var l=new egret.TextField;l.text="input your name:",l.x=s.sprite.width/2-320,l.y=s.sprite.height/3-18,l.size=30,s.sprite.addChild(l),s.sprite.addChild(s.txInput);var g=new egret.Shape;g.graphics.beginFill(52224),g.graphics.drawRect(0,0,200,50),g.graphics.endFill(),g.x=s.sprite.width/2,g.y=s.sprite.height/2,g.anchorOffsetX=g.width/2,g.anchorOffsetY=g.height/2,g.touchEnabled=!0,g.addEventListener(egret.TouchEvent.TOUCH_BEGIN,s.onTouchBegin,s),s.sprite.addChild(g);var d=new egret.TextField;return d.text="play",d.anchorOffsetX=d.width/2,d.anchorOffsetY=d.height/2,d.x=s.sprite.width/2,d.y=s.sprite.height/2,s.sprite.addChild(d),s.text2=new egret.TextField,s.text2.text="please input your name and the game's secret",s.text2.width=a,s.sprite.addChild(s.text2),s}return __extends(i,t),i.prototype.onTouchBegin=function(){var t=this.txInput.text;this.player=t;var i=this.txInput2.text;console.log("player:"+t);var r=this;t&&i?(base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("find_players",{game_secret:r.game_secret,gameName:r.gameName}).then(function(a){var n=a.player_list,s=n.indexOf(r.txInput.text);i!=r.game_secret?r.text2.text="please input the correct password to enter the game":-1==s?r.text2.text="you aren't invited !":r.stage&&base.API.call("get_players_process",{game_secret:r.game_secret,inviter_name:r.inviter,player:t,gameName:r.gameName}).then(function(a){console.log(a);var n=a.process,s=a.playercount,o=a.processson;if(r.playerCount=s,"2.0"==n){var h=new e.CharacterChoosePage(i,r.inviter,t,r.gameName,r.stage.stageWidth,r.stage.stageHeight,s);r.stage.addChild(h),r.sprite.visible=!1}else if("3"==n){var c=r,l=0;base.API.call("get_player_characterlist",{game_secret:c.game_secret,inviter:c.inviter,player:c.player,gameName:c.gameName}).then(function(t){var i=t.data,a=[];i.forEach(function(e,t,i){var a=e[0];-1==r.playerList.indexOf(a)&&(l++,c.allcharacterlist.push(e[1]),c.playerList.push(a))}),l==s&&(console.log("character_list"),a.push(c.playerList),a.push(c.allcharacterlist));var n=c.game_secret,h=c.inviter,g=c.player,d=c.gameName,p=c.stage.stageWidth,u=c.stage.stageHeight,m=o,f=new e.Character(n,h,g,d,p,u,m,a);c.stage.addChild(f),c.sprite.visible=!1})}else if("4"==n){var c=r,l=0;base.API.call("get_player_characterlist",{game_secret:c.game_secret,inviter:c.inviter,player:c.player,gameName:c.gameName}).then(function(a){var n=a.data,o=[];n.forEach(function(e,t,i){var a=e[0];-1==r.playerList.indexOf(a)&&(l++,c.allcharacterlist.push(e[1]),c.playerList.push(a))}),l==s&&(console.log("character_list"),o.push(c.playerList),o.push(c.allcharacterlist));var h=new e.TensionScaleResult(c.stage.stageWidth,c.stage.stageHeight,c.inviter,i,t,c.gameName,o,s);c.stage.addChild(h),c.sprite.visible=!1})}else{var g=new e.GamePageOne(i,r.inviter,t,r.gameName,r.stage.stageWidth,r.stage.stageHeight);r.stage.addChild(g),r.sprite.visible=!1}}),r.isPlayer=s})["catch"](function(e){console.log(e)})):this.text2.text="you must input your name and the game's secret"},i.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},i.prototype.onTouchMove=function(){egret.log("onTouchMove")},i.prototype.onTouchTap=function(){egret.log("onTouchTap")},i}(egret.DisplayObjectContainer);e.EnterGame=t,__reflect(t.prototype,"game.EnterGame")}(game||(game={}));var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){egret.lifecycle.addLifecycleListener(function(e){e.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=i.sent(),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return t=i.sent(),console.log(t),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("preload",0,e)];case 2:return i.sent(),this.stage.removeChild(e),[3,4];case 3:return t=i.sent(),console.error(t),[3,4];case 4:return[2]}})})},t.prototype.createGameScene=function(){var e=this.stage.stageWidth,t=this.stage.stageHeight,i=new game.Index(e,t);this.stage.addChild(i)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t.prototype.startAnimation=function(e){var t=this,i=new egret.HtmlTextParser,r=e.map(function(e){return i.parse(e)}),a=this.textfield,n=-1,s=function(){n++,n>=r.length&&(n=0);var e=r[n];a.textFlow=e;var i=egret.Tween.get(a);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(s,t)};s()},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var game;!function(e){var t=function(t){function i(e,i){var r=t.call(this)||this;return r.game_list=[],r.stageWidth=0,r.stageHeight=0,r.stageWidth=e,r.stageHeight=i,r.sprite=new egret.Sprite,r.addChild(r.sprite),r.sprite.touchEnabled=!0,r.label=new egret.TextField,r.label.text="create game",r.label.height=80,r.label.width=180,r.label.anchorOffsetX=r.label.width/2,r.label.anchorOffsetY=r.label.height/2,r.label.x=r.stageWidth/2,r.label.y=r.stageHeight,r.label.touchEnabled=!0,r.label.background=!0,r.label.backgroundColor=16777215,r.label.border=!0,r.label.borderColor=65280,r.label.fontFamily="Arial",r.label.textColor=16711680,r.label.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.onTouchBegin,r),r.addChild(r.label),r.sprite.addEventListener(egret.Event.ADDED_TO_STAGE,r.getGameList,r),r}return __extends(i,t),i.prototype.getGameList=function(){base.API.Init("http://39.104.85.167:8105/api/");var e=this;base.API.call("get_game_list",{}).then(function(t){var i=this;this.game_list=t.gameList,this.game_list.forEach(function(t,r,a){var n=new egret.TextField;n.text=t[1],n.size=40,n.lineSpacing=10,n.touchEnabled=!0,n.border=!0,n.borderColor=65280,n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,n.x=e.stageWidth/2,n.y=100+50*r,n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.startGame.bind(e,t[0],t[1],t[2]),i),e.sprite.addChild(n)})})},i.prototype.startGame=function(t,i,r){if(this.stage){var a=new e.EnterGame(t,i,r,this.stage.stageWidth,this.stage.stageHeight);this.stage.addChild(a),this.sprite.visible=!1,this.label.visible=!1}},i.prototype.onTouchBegin=function(){if(console.log(this.stage),this.stage){var t=new e.CreateGame(this.stage.stageWidth,this.stage.stageHeight);this.stage.addChild(t),this.sprite.visible=!1,this.label.visible=!1}},i.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},i.prototype.onTouchMove=function(){egret.log("onTouchMove")},i.prototype.onTouchTap=function(){egret.log("onTouchTap")},i}(egret.DisplayObjectContainer);e.Index=t,__reflect(t.prototype,"game.Index")}(game||(game={}));var game;!function(e){var t=function(t){function i(e,i,r,a,n){var s=t.call(this)||this;s.count=0,s.playerList=[],s.game_secret="",s.inviter="",s.gameName="",s.game_secret=e,s.inviter=i,s.gameName=r,s.sprite=new egret.Sprite,s.sprite.width=a,s.sprite.height=n,s.addChild(s.sprite);var o=new egret.Shape;o.graphics.beginFill(16774638),o.graphics.drawRect(0,0,300,50),o.graphics.endFill(),o.x=s.sprite.width/2+60,o.y=s.sprite.height/3,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,s.sprite.addChild(o),s.txInput=new egret.TextField,s.txInput.type=egret.TextFieldType.INPUT,s.txInput.inputType=egret.TextFieldInputType.TEXT,s.txInput.width=290,s.txInput.height=50,s.txInput.x=s.sprite.width/2+60,s.txInput.y=s.sprite.height/3,s.txInput.anchorOffsetX=s.txInput.width/2,s.txInput.anchorOffsetY=s.txInput.height/2,s.txInput.textColor=855309,s.txInput.size=40;var h=new egret.TextField;h.text="input player:",h.x=s.sprite.width/2-280,h.y=s.sprite.height/3-18,h.size=30,s.sprite.addChild(h),s.sprite.addChild(s.txInput);var c=new egret.Shape;c.graphics.beginFill(52224),c.graphics.drawRect(0,0,200,50),c.graphics.endFill(),c.x=s.sprite.width/2,c.y=s.sprite.height/2,c.anchorOffsetX=c.width/2,c.anchorOffsetY=c.height/2,c.touchEnabled=!0,c.addEventListener(egret.TouchEvent.TOUCH_BEGIN,s.onTouchBegin,s),s.sprite.addChild(c);var l=new egret.TextField;l.text="invite",l.anchorOffsetX=l.width/2,l.anchorOffsetY=l.height/2,l.x=s.sprite.width/2,l.y=s.sprite.height/2,s.sprite.addChild(l);var g=new egret.Shape;g.graphics.beginFill(52224),g.graphics.drawRect(0,0,200,50),g.graphics.endFill(),g.x=s.sprite.width/2,g.y=s.sprite.height/2+100,g.anchorOffsetX=c.width/2,g.anchorOffsetY=c.height/2,g.touchEnabled=!0,g.addEventListener(egret.TouchEvent.TOUCH_BEGIN,s.invateFriends,s),s.sprite.addChild(g);var d=new egret.TextField;return d.text="play",d.anchorOffsetX=d.width/2,d.anchorOffsetY=d.height/2,d.x=s.sprite.width/2,d.y=s.sprite.height/2+100,s.sprite.addChild(d),s.text2=new egret.TextField,s.text2.text="You have invited "+s.count+" players",s.text2.width=a,s.sprite.addChild(s.text2),s}return __extends(i,t),i.prototype.invateFriends=function(){console.log(1);var e=new BodyConfig;e.appId="wx4f735f8d65cf5f28",e.debug=!0,wx&&(wx.config(e),wx.ready(function(){console.log(12),wx.checkJsApi({jsApiList:["chooseImage"],success:function(e){console.log(333),console.log(e)}})}))},i.prototype.onTouchBegin=function(){var e=this,t=this.txInput.text;if(t){var i=0;if(this.playerList.forEach(function(r,a,n){console.log(r),r==t&&(e.text2.text="please dont invite the duplicate player !",i=1)}),0==i){this.playerList.push(t),this.count+=1,this.text2.text="You have invited "+this.count+" players";var r=this;base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("create_player",{player_name:t,game_secret:r.game_secret,gameName:r.gameName,inviter:r.inviter}).then(function(e){console.log(e)})["catch"](function(e){console.log(e)})}}},i.prototype.onTouchBegin2=function(){if(this.playerList.length<2)this.text2.text="You must invite 3 players to start the game at least!";else{var t=this;if(this.stage){var i=new e.GamePageOne(t.game_secret,t.inviter,t.inviter,t.gameName,this.stage.stageWidth,this.stage.stageHeight);this.stage.addChild(i),t.sprite.visible=!1}}},i.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},i.prototype.onTouchMove=function(){egret.log("onTouchMove")},i.prototype.onTouchTap=function(){egret.log("onTouchTap")},i}(egret.DisplayObjectContainer);e.InviteFriends=t,__reflect(t.prototype,"game.InviteFriends")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.sprite=new egret.Sprite,t.sprite.graphics.beginFill(16711680),t.sprite.graphics.drawRect(0,0,100,100),t.sprite.graphics.endFill(),t.addChild(t.sprite),t.sprite.touchEnabled=!0,t.sprite.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTouchBegin,t),t.sprite.addEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,t),t.sprite.addEventListener(egret.TouchEvent.TOUCH_MOVE,t.onTouchMove,t),t.sprite.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTouchTap,t),t}return __extends(t,e),t.prototype.onTouchBegin=function(){this.sprite.visible=!1},t.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},t.prototype.onTouchMove=function(){egret.log("onTouchMove")},t.prototype.onTouchTap=function(){egret.log("onTouchTap")},t}(egret.DisplayObjectContainer);e.LoadingScene=t,__reflect(t.prototype,"game.LoadingScene")}(game||(game={}));var game;!function(e){var t=function(e){function t(t,i){var r=e.call(this)||this;return r.stageWidth=0,r.stageHeight=0,r.stageWidth=t,r.stageHeight=i,r.sprite=new egret.Sprite,r.sprite.width=t,r.sprite.height=i,r.addChild(r.sprite),r.tipText(),r}return __extends(t,e),t.prototype.tipText=function(){var e=new egret.TextField,t=new egret.TextField;e.text="Higher numbers indicate bigger tensions between your self-perception & the teams attribution of your position on the scale:",e.size=30,e.x=0,e.y=0,e.width=this.stageWidth,e.background=!0,e.backgroundColor=4951491,t.text="• White values: mark areas of authentic action.            • Values over 13: indicate your dissociative effect on the team‘s organizing dynamics.                  • Red values: mark your self- perception as being outside ZORA.                                                    • Yellow Values: mark your attributed position as being outside ZORA.",t.size=30,t.x=0,t.y=90,t.width=this.stageWidth,t.background=!0,t.backgroundColor=4951491,this.sprite.addChild(e),this.sprite.addChild(t)},t}(egret.DisplayObjectContainer);e.MajorTensionsTip=t,__reflect(t.prototype,"game.MajorTensionsTip")}(game||(game={}));var game;!function(e){var t=function(e){function t(t,i,r,a,n,s,o,h,c,l){return e.call(this)||this}return __extends(t,e),t}(egret.DisplayObjectContainer);e.MissionOneResult=t,__reflect(t.prototype,"game.MissionOneResult")}(game||(game={}));var game;!function(e){var t=function(t){function i(i,r,a,n,s,o,h){var c=t.call(this)||this;c.game_secret="",c.gameName="",c.inviter="",c.player="",c.stageWidth=0,c.stageHeight=0,c.characterListParams=[],c.simulatedData=[],c.ttsms=[],c.stageWidth=i,c.stageHeight=r,c.player=s,c.gameName=o,c.game_secret=n,c.inviter=a,c.characterListParams=h,c.sprite=new egret.Sprite,c.addChild(c.sprite),c.drawTitle(),c.drawResult(),c._shape=new egret.Shape,c.addChild(c._shape),c._shape.alpha=.5;var l=new e.ProcessBar(i,r,100,"Mission 1 > ZORA Map");return c.sprite.addChild(l),console.log("ttsmsstart3:"),console.log(c.ttsms),console.log("ttsmsend3:"),c}return __extends(i,t),i.prototype.getTTSMS=function(){var e=this;base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("get_ttsm",{characterListParams:e.characterListParams,inviter:e.inviter,gameSecret:e.game_secret,player:e.player,gameName:e.gameName}).then(function(t){var i=t.result;e.ttsms=i,console.log("ttsmsstart1:"),console.log(e.ttsms),console.log("ttsmsend1:")})},i.prototype.initGraphics=function(){var e=this._shape;e.graphics.lineStyle(2,16448210),e.graphics.moveTo(this.stageWidth/2,this.stageHeight),e.graphics.lineTo(this.stageWidth/2,130);var t=this._shape;t.graphics.beginFill(16774799,.5),t.graphics.lineStyle(0),t.graphics.drawRect(this.stageWidth/2-Math.ceil(200/81*13),130,2*Math.ceil(200/81*13),this.stageHeight),t.graphics.endFill()},i.prototype.drawResult=function(){var e=this;base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("get_game_score",{characterListParams:e.characterListParams,inviter:e.inviter,gameSecret:e.game_secret,player:e.player,gameName:e.gameName}).then(function(t){var i=t.result;e.simulatedData=i;var r=e;base.API.call("get_ttsm",{characterListParams:r.characterListParams,inviter:r.inviter,gameSecret:r.game_secret,player:r.player,gameName:r.gameName}).then(function(t){var i=t.result;r.ttsms=i,console.log("ttsmsstart1:"),console.log(r.ttsms),console.log("ttsmsend1:"),e.drawTensionScale(r.ttsms)}),e.initGraphics()}),console.log(11111111111),console.log(e.simulatedData),console.log(111111111),console.log("ttsmsstart2:"),console.log(e.ttsms),console.log("ttsmsend2:")},i.prototype.drawTensionScale=function(t){var i=this;console.log(this.simulatedData),this.ttsms=t,console.log(this.ttsms),console.log(222222),this.simulatedData.forEach(function(t,r,a){try{var n=i.ttsms[r],s=(t[2].toString(),new e.ZORAMap(t[0],t[1],i.player,t[3],t[2],i.stageWidth,i.stageHeight,n));console.log(s),s.y=200+150*(r-1),i.sprite.addChild(s)}catch(o){}})},i.prototype.drawLine=function(){var e=new egret.Shape;e.graphics.lineStyle(Math.ceil(200/81*13),16711935),e.graphics.moveTo(this.stageWidth/2,this.stageHeight),e.graphics.lineTo(this.stageWidth/2,150),this.sprite.addChild(e)},i.prototype.drawTitle=function(){var e=new egret.Shape;e.graphics.beginFill(3514259,.5),e.graphics.drawRect(0,0,this.stageWidth,130),e.graphics.endFill(),this.sprite.addChild(e);var t=new egret.TextField;t.text="Mission 1 Complete: Here is an image of you in your Team‘s Zone of Responsible Action.",t.size=30,t.width=this.stageWidth,t.x=1,t.y=50,this.sprite.addChild(t)},i}(egret.DisplayObjectContainer);e.MissionResult=t,__reflect(t.prototype,"game.MissionResult")}(game||(game={}));var game;!function(e){var t=function(t){function i(e,i,r,a,n,s){var o=t.call(this)||this;o.playerList=[],o.game_secret="",o.player="",o.gameName="",o.inviter="",o.stageWidth=0,o.stageHeight=0,o._touchStatus=!1,o._distance=new egret.Point,o.characterList=[],o.characterTwo="Fully",o.characterOne="Insufficiently",o.player_score_list=[],o.player_list=[],o.playerscore=0,o.middle=0,o.game_secret=e,o.player=r,o.gameName=a,o.inviter=i,o.stageWidth=n,o.stageHeight=s,o.sprite=new egret.Sprite,o.sprite.width=n,o.sprite.height=s,o.sprite.x=0,o.sprite.y=0,o.addChild(o.sprite),o.sprite.addEventListener(egret.Event.ADDED_TO_STAGE,o.getPlayScoreList,o),o.rectShapeOne=new egret.Shape,o.rectShapeTwo=new egret.Shape,o.sprite.addChild(o.rectShapeOne),o.sprite.addChild(o.rectShapeTwo),o.drawRect();var h=new egret.TextField;return h.text=o.characterOne,h.textAlign=egret.HorizontalAlign.CENTER,h.size=40,h.border=!0,h.width=280,h.borderColor=3825613,h.x=n-390,h.y=200,o.sprite.addChild(h),o._shape=new egret.Shape,o.addChild(o._shape),o.initGraphics(),o.charater2=new egret.TextField,o.sprite.addChild(o.charater2),o.initCharacter(n-390,o.stageHeight-150),o.rightIcon=new egret.Bitmap(RES.getRes("right_png")),o.rightIcon.width=100,o.rightIcon.height=100,o.rightIcon.anchorOffsetX=o.rightIcon.width/2,o.rightIcon.anchorOffsetY=o.rightIcon.height/2,o.rightIcon.x=n-50,o.rightIcon.y=s/2,o.addChild(o.rightIcon),o.rightIcon.touchEnabled=!0,o.rightIcon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,o.nextTouch,o),o.closeIcon=new egret.Bitmap(RES.getRes("close-circle_png")),o.closeIcon.width=40,o.closeIcon.height=40,o.closeIcon.anchorOffsetX=o.closeIcon.width/2,o.closeIcon.anchorOffsetY=o.closeIcon.height/2,o.closeIcon.x=n-30,o.closeIcon.y=150,o.closeIcon.touchEnabled=!0,o.closeIcon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,o.closeTip,o),o.addChild(o.closeIcon),o.tiptext=new egret.TextField,o.timer=new egret.Timer(1e3,0),o.timer.addEventListener(egret.TimerEvent.TIMER,o.getPlayScoreList,o),o.timer.start(),o.middleScore=new egret.TextField,o.middleScore.textAlign=egret.HorizontalAlign.CENTER,o.middleScore.size=30,o.middleScore.lineSpacing=10,o.middleScore.border=!0,o.middleScore.background=!0,o.middleScore.backgroundColor=8009611,o.middleScore.borderColor=65280,o.middleScore.visible=!1,o.sprite.addChild(o.middleScore),o.middlePlayer=new egret.TextField,o.middlePlayer.textAlign=egret.HorizontalAlign.CENTER,o.middlePlayer.size=30,o.middlePlayer.lineSpacing=10,o.middlePlayer.border=!0,o.middlePlayer.background=!0,o.middlePlayer.borderColor=65280,o.middlePlayer.visible=!1,o.middlePlayer.backgroundColor=7120589,o.sprite.addChild(o.middlePlayer),o}return __extends(i,t),i.prototype.getPlayScoreList=function(){var e=this;base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("get_player_score",{inviter:this.inviter,gameName:this.gameName,gameSecret:this.game_secret,player:this.player,character_one:this.characterOne,character_two:this.characterTwo,chooser:this.inviter}).then(function(t){e.player_list.forEach(function(t,i,r){var a=new egret.TextField;a.text=t,a.textAlign=egret.HorizontalAlign.CENTER,a.size=30,a.lineSpacing=10,a.touchEnabled=!0,a.border=!0,a.background=!0,a.borderColor=65280,a.alpha=.5;var n=new egret.TextField;n.size=30,n.border=!0,n.background=!0,n.borderColor=57123,n.textAlign=egret.HorizontalAlign.CENTER,n.alpha=.5,t==e.player&&i!=e.player_score_list.length?(e.playerscore=e.player_score_list[i],a.backgroundColor=7120589):a.backgroundColor=6513507,18*t.length<100?a.width=100:a.width=18*t.length;var s=100;a.width>100&&(s=a.width),i%2!=0?(a.x=e.stageWidth-250-s,n.x=a.x-50):(a.x=e.stageWidth-250,n.x=a.x+s);var o=e.player_score_list[i];a.y=o*((e.stageHeight-150-240)/81)+240,e.sprite.addChild(a),n.text=e.player_score_list[i],n.width=50,n.y=a.y,n.backgroundColor=16744228,e.sprite.addChild(n)})})},i.prototype.closeTip=function(){this.tiptext.parent&&this.removeChild(this.tiptext)},i.prototype.nextTouch=function(){if(this.stage){var t=this.game_secret,i=this.inviter,r=this.player,a=this.gameName,n=this.stageWidth,s=this.stageHeight,o=0;this.characterList=[["zjy","1","2"],[["Loyality","Joy"],["Power","Courage"],["Harmony","Disruption"]]];var h=new e.Character(t,i,r,a,n,s,o,this.characterList);this.stage.addChild(h),this.sprite.visible=!1,this.tiptext.text="",this.removeChild(this.rightIcon),this.removeChild(this.closeIcon)}},i.prototype.tip=function(e,t,i,r){var a=this.tiptext;a.x=e,a.y=t,a.text=i,a.size=r,a.width=this.stageWidth},i.prototype.drawRect=function(){var e=this.rectShapeOne;e.graphics.beginFill(16711680,.5),e.graphics.drawRect(0,0,this.stageWidth+60,180),e.graphics.endFill();var t=this.rectShapeTwo;t.graphics.beginFill(16711680,.5),t.graphics.drawRect(0,this.stageHeight-100,this.stageWidth+60,200),t.graphics.endFill()},i.prototype.initGraphics=function(){var e=this._shape;e.graphics.lineStyle(2,16711935),e.graphics.moveTo(this.stageWidth-250,this.stageHeight-150),e.graphics.lineTo(this.stageWidth-250,240)},i.prototype.initCharacter=function(e,t){var i=this.charater2;i.text=this.characterTwo,i.textAlign=egret.HorizontalAlign.CENTER,i.size=40,i.border=!0,i.width=280,i.borderColor=3825613,i.x=e,i.y=t},i.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},i.prototype.onTouchMove=function(){egret.log("onTouchMove")},i.prototype.onTouchTap=function(){egret.log("onTouchTap")},i}(egret.DisplayObjectContainer);e.PageOneResult=t,__reflect(t.prototype,"game.PageOneResult")}(game||(game={}));var game;!function(e){var t=function(e){function t(t,i,r,a){var n=e.call(this)||this;return n.stageWidth=0,n.stageHeight=0,n.processX=20,n.process=100,n.missionName="",n.stageWidth=t,n.stageHeight=i,n.sprite=new egret.Sprite,n.process=r,n.missionName=a,n.addChild(n.sprite),n.processBar(),n}return __extends(t,e),t.prototype.processBar=function(){var e=new egret.Shape,t=new egret.Shape,i=new egret.TextField,r=new egret.TextField;e.graphics.beginFill(5357252),e.graphics.drawRect(0,0,this.stageWidth,50),e.graphics.endFill(),t.graphics.beginFill(3617171),t.graphics.drawRect(this.processX,10,2*this.process,30),t.graphics.endFill(),i.text=this.process.toString()+"%",i.size=20,i.x=this.processX+2*this.process+15,i.y=15,i.textColor=16777215,this.process>50&&(i.x=(this.processX+2*this.process)/2-15*(this.process/100)),r.text=this.missionName,r.textAlign=egret.VerticalAlign.MIDDLE,r.size=27,r.x=250,r.y=5,r.textColor=16777215,this.sprite.addChild(e),this.sprite.addChild(t),this.sprite.addChild(i),this.sprite.addChild(r)},t}(egret.DisplayObjectContainer);e.ProcessBar=t,__reflect(t.prototype,"game.ProcessBar")}(game||(game={}));var game;!function(e){var t=function(e){function t(t,i,r,a,n,s,o){var h=e.call(this)||this;return h.stageWidth=0,h.stageHeight=0,h.select_list=[],h.selfPerciption=1,h.individualTensionScaleMedian=60,h.absoluteValueOfDeviation=0,h.teamTensionScaleMedian=30,h.ZORAMin=0,h.ZORAMax=0,h.select_list=r,h.selfPerciption=n,h.teamTensionScaleMedian=s,h.absoluteValueOfDeviation=a,h.ZORAMin=h.teamTensionScaleMedian-13,h.ZORAMax=h.teamTensionScaleMedian+13,h.individualTensionScaleMedian=o,h.stageWidth=t,h.stageHeight=i,h.sprite=new egret.Sprite,h.addChild(h.sprite),h.sprite.touchEnabled=!0,h.drawCharacter(),h.drawScore(),h}return __extends(t,e),t.prototype.drawCharacter=function(){var e=(255+167772.15*Math.floor(100*Math.random()),new egret.Shape),t=new egret.Shape;e.graphics.beginFill(7434694),e.graphics.drawRect(0,0,180,60),e.graphics.endFill();var i=new egret.TextField;i.x=e.x,i.y=10,i.text=this.select_list[0],t.graphics.beginFill(7434694),t.graphics.drawRect(0,80,180,60),t.graphics.endFill();var r=new egret.TextField;r.x=t.x,r.y=90,r.text=this.select_list[1],this.sprite.addChild(e),this.sprite.addChild(t),this.sprite.addChild(i),this.sprite.addChild(r)},t.prototype.drawScore=function(){var e=new egret.Shape,t=new egret.Shape,i=new egret.Shape,r=new egret.TextField;e.graphics.beginFill(12665667),e.graphics.lineStyle(2,16777215),e.graphics.drawCircle(90,70,30),e.graphics.endFill(),t.graphics.beginFill(13224552),t.graphics.lineStyle(2,16777215),t.graphics.drawCircle(90,70,30),t.graphics.endFill(),i.graphics.beginFill(16513522),i.graphics.lineStyle(2,16777215),i.graphics.drawCircle(90,70,30),i.graphics.endFill(),this.ZORAMin>this.selfPerciption||this.selfPerciption>this.ZORAMax?(this.sprite.addChild(e),(this.ZORAMin>this.individualTensionScaleMedian||this.individualTensionScaleMedian>this.ZORAMax)&&(t.graphics.beginFill(12665667),t.graphics.lineStyle(0,16777215),t.graphics.drawCircle(90,70,20),t.graphics.endFill(),this.sprite.addChild(t))):this.ZORAMin<=this.selfPerciption&&this.selfPerciption<=this.ZORAMax&&(this.ZORAMin<=this.individualTensionScaleMedian&&this.individualTensionScaleMedian<=this.ZORAMax?this.sprite.addChild(i):(this.ZORAMin>this.individualTensionScaleMedian||this.individualTensionScaleMedian>this.ZORAMax)&&this.sprite.addChild(t)),r.text=this.absoluteValueOfDeviation.toString(),r.size=20,r.textColor=0,r.x=80,r.y=60,this.sprite.addChild(r)},t}(egret.DisplayObjectContainer);e.TensionScale=t,__reflect(t.prototype,"game.TensionScale")}(game||(game={}));var game;!function(e){var t=function(t){function i(i,r,a,n,s,o,h,c){var l=t.call(this)||this;l.unselectedCharacterList=[],l.selectedChaeacterList=[],l.game_secret="",l.player="",l.gameName="",l.inviter="",l.characterListParams=[],l.stageWidth=0,l.stageHeight=0,l.playerCount=0,l.simulatedData=[],l._touchStatus=!1,l.ttsms=[],l.game_secret=n,l.player=s,l.gameName=o,l.inviter=a,l.characterListParams=h,l.playerCount=c,console.log(h),l.stageWidth=i,l.stageHeight=r,l.sprite=new egret.Sprite,l.addChild(l.sprite),l.sprite.touchEnabled=!0,l.drawTensionScale(),l.drawTitle(),l.timer=new egret.Timer(1e3,0),l.timer.addEventListener(egret.TimerEvent.TIMER,l.getGameResult,l),l.timer.start(),l.rightIcon=new egret.Bitmap(RES.getRes("right_png")),l.rightIcon.width=100,l.rightIcon.height=100,l.rightIcon.anchorOffsetX=l.rightIcon.width/2,l.rightIcon.anchorOffsetY=l.rightIcon.height/2,l.rightIcon.x=i-50,l.rightIcon.y=r-100,l.rightIcon.touchEnabled=!0,l.rightIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,l.rightNext,l);var g=new e.ProcessBar(i,r,90,"Mission 1 > Major Tensions");l.sprite.addChild(g);var d=new e.MajorTensionsTip(i,r);return d.y=r-300,d.x=3,d.width=i-3,l.sprite.addChild(d),l}return __extends(i,t),i.prototype.getGameResult=function(){var e=this;base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("get_game_score",{characterListParams:e.characterListParams,inviter:e.inviter,gameSecret:e.game_secret,player:e.player,gameName:e.gameName}).then(function(t){var i=t.result;e.ttsms=t.ttsms,e.simulatedData=i,e.drawTensionScale()})},i.prototype.drawTitle=function(){var e=new egret.Shape;e.graphics.beginFill(3514259,.5),e.graphics.drawRect(0,0,this.stageWidth,130),e.graphics.endFill(),this.sprite.addChild(e);var t=new egret.TextField;t.text="Identify the major sources of tension with you teammates",t.size=30,t.width=this.stageWidth,t.x=1,t.y=50,this.sprite.addChild(t)},i.prototype.drawTensionScale=function(){var t=this;console.log(this.simulatedData),console.log("tssmsssssddsfasdfasdf"),console.log(this.ttsms),console.log("tssmsssssddsfasdfasdf"),this.simulatedData.forEach(function(i,r,a){try{var n=Number(i[3].toString()),s=Number(i[2].toString()),o=(i[0],i[2],Math.abs(n-s)),h=s,c=new e.TensionScale(100,60,[i[0],i[1]],o,n,Number(t.ttsms[r]),h);r%2==1?(c.x=150,c.y=150+100*(r-1)):r%2==0&&(c.x=350,c.y=150+100*r),t.sprite.addChild(c)}catch(l){}}),console.log(this.simulatedData),this.simulatedData[2]&&this.playerCount==this.simulatedData[2].length-1&&(this.addChild(this.rightIcon),this.timer.stop())},i.prototype.rightNext=function(){var t=this;if(t.stage){var i=new e.MissionResult(t.stageWidth,t.stageHeight,t.inviter,t.game_secret,t.player,t.gameName,t.characterListParams);t.stage.addChild(i),t.sprite.visible=!1,t.rightIcon.visible=!1}},i.prototype.onTouchBegin=function(){if(this.stage){var t=new e.CreateGame(this.stage.stageWidth,this.stage.stageHeight);this.stage.addChild(t),this.sprite.visible=!1,this.label.visible=!1}},i.prototype.getRandomScore=function(e,t){var i=t-e,r=Math.random();return e+Math.round(r*i)},i.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},i.prototype.onTouchMove=function(){egret.log("onTouchMove")},i.prototype.onTouchTap=function(){egret.log("onTouchTap")},i}(egret.DisplayObjectContainer);e.TensionScaleResult=t,__reflect(t.prototype,"game.TensionScaleResult")}(game||(game={}));var game;!function(e){var t=function(e){function t(t,i,r,a,n,s,o,h){var c=e.call(this)||this;return c.playerList=[],c.game_secret="",c.player="",c.gameName="",c.inviter="",c.stageWidth=0,c.stageHeight=0,c.characterTwo="Fully",c.characterOne="Insufficiently",c._touchStatus=!1,c._distance=new egret.Point,c.playerScore="",c.tensionMedian="",c.player_name="",c.median=0,c.characterList=[],c.map={},c.ttsm=0,c.selfPerciption=1,c.individualTensionScaleMedian=60,c.absoluteValueOfDeviation=0,c.teamTensionScaleMedian=30,c.ZORAMin=0,c.ZORAMax=0,c.stageWidth=s,c.stageHeight=o,c.ttsm=Number(h),console.log(s),c.playerScore=a,c.tensionMedian=n,c.characterTwo=i,c.characterOne=t,c.player_name=r,c.median=Math.abs(Number(a)-Number(n)),c.absoluteValueOfDeviation=c.median,c.selfPerciption=Number(c.playerScore),c.individualTensionScaleMedian=Number(c.tensionMedian),c.teamTensionScaleMedian=c.ttsm,c.ZORAMin=c.teamTensionScaleMedian-13,c.ZORAMax=c.teamTensionScaleMedian+13,c.sprite=new egret.Sprite,c.sprite.width=s,c.sprite.height=o,c.sprite.x=0,c.sprite.y=0,c.addChild(c.sprite),c._shape=new egret.Shape,c.addChild(c._shape),c.drawVoteArea(),c}return __extends(t,e),t.prototype.drawVoteArea=function(){var e=new egret.TextField,t=new egret.TextField,i=this._shape,r=new egret.TextField,a=new egret.TextField,n=Math.ceil((Number(this.playerScore)-this.ttsm)*(200/81)+this.stageWidth/2),s=new egret.TextField,o=new egret.TextField,h=Math.ceil((Number(this.tensionMedian)-this.ttsm)*(200/81)+this.stageWidth/2);e.text=this.characterOne,e.textAlign=egret.HorizontalAlign.CENTER,e.size=30,e.border=!0,e.width=60,e.height=120,e.borderColor=3825613,e.background=!0,e.backgroundColor=16513522,e.textColor=0,e.x=Math.ceil(this.stageWidth/2-(200/81*this.ttsm+60)),e.y=150,t.text=this.characterTwo,t.textAlign=egret.HorizontalAlign.CENTER,t.size=30,t.border=!0,t.width=60,t.height=120,t.borderColor=3825613,t.x=this.stageWidth/2+Math.ceil(200/81*(81-this.ttsm)+60),t.y=150,t.background=!0,t.backgroundColor=16513522,t.textColor=0,i.graphics.lineStyle(2,14492194),i.graphics.moveTo(e.x+60,210),i.graphics.lineTo(t.x,210),r.text=this.player_name,r.textAlign=egret.HorizontalAlign.CENTER,r.size=20,r.border=!0,r.width=50,r.height=20,r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,r.borderColor=0,r.x=n,r.y=260,r.rotation=270,r.textColor=0,a.text=this.playerScore,a.textAlign=egret.HorizontalAlign.CENTER,a.size=20,a.border=!0,a.width=50,a.height=20,a.borderColor=0,a.x=n,a.y=210,a.rotation=270,a.textColor=0,a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,s.text=this.tensionMedian+"/"+this.median,s.textAlign=egret.HorizontalAlign.CENTER,s.size=20,s.border=!0,s.width=60,s.height=20,s.borderColor=0,s.x=h,s.y=210,s.rotation=270,s.textColor=0,s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,o.text=this.player_name,o.textAlign=egret.HorizontalAlign.CENTER,o.size=20,o.border=!0,o.width=60,o.height=20,o.borderColor=0,o.x=h,o.y=270,o.rotation=270,o.textColor=0,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,this.ZORAMin>this.selfPerciption||this.selfPerciption>this.ZORAMax?(a.background=!0,a.backgroundColor=12665667,this.ZORAMin>this.individualTensionScaleMedian||this.individualTensionScaleMedian>this.ZORAMax?(s.background=!0,s.backgroundColor=13224552):(s.background=!0,s.backgroundColor=16513522),e.backgroundColor=6184542,t.backgroundColor=6184542):this.ZORAMin<=this.selfPerciption&&this.selfPerciption<=this.ZORAMax&&(a.background=!0,a.backgroundColor=16513522,this.ZORAMin<=this.individualTensionScaleMedian&&this.individualTensionScaleMedian<=this.ZORAMax?(a.background=!0,a.backgroundColor=16513522,s.background=!0,s.backgroundColor=16513522):(this.ZORAMin>this.individualTensionScaleMedian||this.individualTensionScaleMedian>this.ZORAMax)&&(s.background=!0,s.backgroundColor=13224552,e.backgroundColor=6184542,t.backgroundColor=6184542)),this.sprite.addChild(e),this.sprite.addChild(t),this.sprite.addChild(i),this.sprite.addChild(r),this.sprite.addChild(a),this.sprite.addChild(s),this.sprite.addChild(o)
},t}(egret.DisplayObjectContainer);e.ZORAMap=t,__reflect(t.prototype,"game.ZORAMap")}(game||(game={}));
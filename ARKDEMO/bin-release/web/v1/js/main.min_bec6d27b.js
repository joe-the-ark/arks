var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,a){function o(e){try{h(n.next(e))}catch(t){a(t)}}function s(e){try{h(n["throw"](e))}catch(t){a(t)}}function h(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(o,s)}h((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;h;)try{if(r=1,a&&(o=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,a=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(o=h.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){h.label=i[1];break}if(6===i[0]&&h.label<o[1]){h.label=o[1],o=i;break}if(o&&h.label<o[2]){h.label=o[2],h.ops.push(i);break}o[2]&&h.ops.pop(),h.trys.pop();continue}i=t.call(e,h)}catch(n){i=[6,n],a=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,a,o,s,h={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},base;!function(e){var t=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function r(e){t.call(n,e)}function a(t){t.resItem.url===e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(n))}var o=this;"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(n,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(e,i){window.JSONParseClass.setData(e),r(e),egret.callLater(function(){t.call(n,generateEUI2)},o)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT))},e}();e.ThemeAdapter=t,__reflect(t.prototype,"base.ThemeAdapter",["eui.IThemeAdapter"])}(base||(base={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var base;!function(e){var t=function(){function e(e){this.baseUrl=e}return e.Init=function(t){e.instance=new e(t)},e.call=function(e,t){return __awaiter(this,void 0,void 0,function(){var i,n=this;return __generator(this,function(r){return i=new Promise(function(i,r){var a=new egret.HttpRequest;a.responseType=egret.HttpResponseType.TEXT,a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),a.open(n.instance.baseUrl+e+"/","POST"),a.send(JSON.stringify(t)),a.addEventListener(egret.Event.COMPLETE,function(e){var t=JSON.parse(a.response);t.success?i(t.result):r({code:t.code,msg:t.msg})},n)}),[2,i]})})},e.instance=null,e}();e.API=t,__reflect(t.prototype,"base.API")}(base||(base={}));var base;!function(e){var t=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}var r=RES.getRes(e);r?n(r):RES.getResAsync(e,n,this)},e}();e.AssetAdapter=t,__reflect(t.prototype,"base.AssetAdapter",["eui.IAssetAdapter"])}(base||(base={}));var Button=function(e){function t(t,i){var n=e.call(this)||this,r=new eui.Group;r.width=t,r.height=i,n.addChild(r);var a=new eui.VerticalLayout;a.gap=30,a.verticalAlign=egret.VerticalAlign.MIDDLE,a.horizontalAlign=egret.HorizontalAlign.CENTER,r.layout=a;var o=new egret.Shape;o.graphics.beginFill(13378065),o.graphics.drawCircle(12,12,6),o.graphics.endFill(),n._icon=o;var s=new egret.RenderTexture;s.drawToTexture(o);var h=new eui.Button;return h.label="按钮",h.icon=s,h.addEventListener(egret.TouchEvent.TOUCH_TAP,n.onTouch,n),r.addChild(h),n}return __extends(t,e),t.prototype.onTouch=function(e){var t=e.target,i=new egret.RenderTexture;switch(i.drawToTexture(this._icon),e.type){case egret.TouchEvent.TOUCH_BEGIN:t.icon=i;break;case egret.TouchEvent.TOUCH_END:t.icon=null}},t}(eui.UILayer);__reflect(Button.prototype,"Button");var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){egret.lifecycle.addLifecycleListener(function(e){e.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=i.sent(),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return t=i.sent(),console.log(t),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("preload",0,e)];case 2:return i.sent(),this.stage.removeChild(e),[3,4];case 3:return t=i.sent(),console.error(t),[3,4];case 4:return[2]}})})},t.prototype.createGameScene=function(){var e=this.stage.stageWidth,t=this.stage.stageHeight,i=new game.Index(e,t);this.stage.addChild(i)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t.prototype.startAnimation=function(e){var t=this,i=new egret.HtmlTextParser,n=e.map(function(e){return i.parse(e)}),r=this.textfield,a=-1,o=function(){a++,a>=n.length&&(a=0);var e=n[a];r.textFlow=e;var i=egret.Tween.get(r);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(o,t)};o()},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var game;!function(e){var t=function(t){function i(e,i){var n=t.call(this)||this;n.count=0,n.playerList=[],n.sprite=new egret.Sprite,n.sprite.width=e,n.sprite.height=i,n.addChild(n.sprite);var r=new egret.Shape;r.graphics.beginFill(16774638),r.graphics.drawRect(0,0,300,50),r.graphics.endFill(),r.x=n.sprite.width/2+60,r.y=n.sprite.height/3,r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,n.sprite.addChild(r),n.txInput=new egret.TextField,n.txInput.type=egret.TextFieldType.INPUT,n.txInput.inputType=egret.TextFieldInputType.TEXT,n.txInput.width=290,n.txInput.height=50,n.txInput.x=n.sprite.width/2+60,n.txInput.y=n.sprite.height/3,n.txInput.anchorOffsetX=n.txInput.width/2,n.txInput.anchorOffsetY=n.txInput.height/2,n.txInput.textColor=855309,n.txInput.size=40;var a=new egret.TextField;a.text="game id:",a.x=n.sprite.width/2-280,a.y=n.sprite.height/3-18,a.size=30,n.sprite.addChild(a),n.sprite.addChild(n.txInput);var o=new egret.Shape;o.graphics.beginFill(16774638),o.graphics.drawRect(0,0,300,50),o.graphics.endFill(),o.x=n.sprite.width/2+60,o.y=n.sprite.height/3-80,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,n.sprite.addChild(o);var s=new egret.Shape;s.graphics.beginFill(16774638),s.graphics.drawRect(0,0,300,50),s.graphics.endFill(),s.x=n.sprite.width/2+60,s.y=n.sprite.height/3-160,s.anchorOffsetX=o.width/2,s.anchorOffsetY=o.height/2,n.sprite.addChild(s),n.txInput2=new egret.TextField,n.txInput2.type=egret.TextFieldType.INPUT,n.txInput2.inputType=egret.TextFieldInputType.TEXT,n.txInput2.width=290,n.txInput2.height=50,n.txInput2.x=n.sprite.width/2+60,n.txInput2.y=n.sprite.height/3-75,n.txInput2.anchorOffsetX=n.txInput2.width/2,n.txInput2.anchorOffsetY=n.txInput2.height/2,n.txInput2.textColor=855309,n.txInput2.size=40;var h=new egret.TextField;h.text="game name:",h.x=n.sprite.width/2-280,h.y=n.sprite.height/3-90,h.size=30,n.sprite.addChild(h),n.sprite.addChild(n.txInput2),n.txInput3=new egret.TextField,n.txInput3.type=egret.TextFieldType.INPUT,n.txInput3.inputType=egret.TextFieldInputType.TEXT,n.txInput3.width=290,n.txInput3.height=50,n.txInput3.x=n.sprite.width/2+60,n.txInput3.y=n.sprite.height/3-150,n.txInput3.anchorOffsetX=n.txInput3.width/2,n.txInput3.anchorOffsetY=n.txInput3.height/2,n.txInput3.textColor=855309,n.txInput3.size=40;var p=new egret.TextField;p.text="your name:",p.x=n.sprite.width/2-280,p.y=n.sprite.height/3-170,p.size=30,n.sprite.addChild(p),n.sprite.addChild(n.txInput3);var c=new egret.Shape;c.graphics.beginFill(52224),c.graphics.drawRect(0,0,200,50),c.graphics.endFill(),c.x=n.sprite.width/2,c.y=n.sprite.height/2,c.anchorOffsetX=c.width/2,c.anchorOffsetY=c.height/2,c.touchEnabled=!0,c.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.onTouchBegin,n),n.sprite.addChild(c);var g=new egret.TextField;return g.text="create",g.anchorOffsetX=g.width/2,g.anchorOffsetY=g.height/2,g.x=n.sprite.width/2,g.y=n.sprite.height/2,n.sprite.addChild(g),n.text2=new egret.TextField,n.text2.width=e,n.sprite.addChild(n.text2),n}return __extends(i,t),i.prototype.onTouchBegin=function(){var t=this.txInput3.text,i=this.txInput2.text,n=this.txInput.text;if(t&&i&&n){if(base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("create_game",{inviter:t,gameName:i,game_id:n}).then(function(e){})["catch"](function(e){console.log(e)}),this.stage){var r=new e.InviteFriends(n,t,i,this.stage.stageWidth,this.stage.stageHeight);this.stage.addChild(r),this.sprite.visible=!1}}else this.text2.text="you must input your name , the game's name and the game_id"},i.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},i.prototype.onTouchMove=function(){egret.log("onTouchMove")},i.prototype.onTouchTap=function(){egret.log("onTouchTap")},i}(egret.DisplayObjectContainer);e.CreateGame=t,__reflect(t.prototype,"game.CreateGame")}(game||(game={}));var game;!function(e){var t=function(t){function i(e,i,n,r,a){var o=t.call(this)||this;o.count=0,o.playerList=[],o.game_secret="",o.gameName="",o.isPlayer=0,o.inviter="",o.game_secret=e,o.gameName=i,o.inviter=n,o.sprite=new egret.Sprite,o.sprite.width=r,o.sprite.height=a,o.addChild(o.sprite);var s=new egret.Shape;s.graphics.beginFill(16774638),s.graphics.drawRect(0,0,300,50),s.graphics.endFill(),s.x=o.sprite.width/2+80,s.y=o.sprite.height/3,s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,o.sprite.addChild(s);var h=new egret.Shape;h.graphics.beginFill(16774638),h.graphics.drawRect(0,0,300,50),h.graphics.endFill(),h.x=o.sprite.width/2+80,h.y=o.sprite.height/3-100,h.anchorOffsetX=h.width/2,h.anchorOffsetY=h.height/2,o.sprite.addChild(h),o.txInput2=new egret.TextField,o.txInput2.type=egret.TextFieldType.INPUT,o.txInput2.inputType=egret.TextFieldInputType.TEXT,o.txInput2.width=290,o.txInput2.height=50,o.txInput2.x=o.sprite.width/2+80,o.txInput2.y=o.sprite.height/3-100,o.txInput2.anchorOffsetX=o.txInput2.width/2,o.txInput2.anchorOffsetY=o.txInput2.height/2,o.txInput2.textColor=855309,o.txInput2.size=40;var p=new egret.TextField;p.text="input game secret:",p.x=o.sprite.width/2-320,p.y=o.sprite.height/3-118,p.size=30,o.sprite.addChild(p),o.sprite.addChild(o.txInput2),o.txInput=new egret.TextField,o.txInput.type=egret.TextFieldType.INPUT,o.txInput.inputType=egret.TextFieldInputType.TEXT,o.txInput.width=290,o.txInput.height=50,o.txInput.x=o.sprite.width/2+80,o.txInput.y=o.sprite.height/3,o.txInput.anchorOffsetX=o.txInput.width/2,o.txInput.anchorOffsetY=o.txInput.height/2,o.txInput.textColor=855309,o.txInput.size=40;var c=new egret.TextField;c.text="input your name:",c.x=o.sprite.width/2-320,c.y=o.sprite.height/3-18,c.size=30,o.sprite.addChild(c),o.sprite.addChild(o.txInput);var g=new egret.Shape;g.graphics.beginFill(52224),g.graphics.drawRect(0,0,200,50),g.graphics.endFill(),g.x=o.sprite.width/2,g.y=o.sprite.height/2,g.anchorOffsetX=g.width/2,g.anchorOffsetY=g.height/2,g.touchEnabled=!0,g.addEventListener(egret.TouchEvent.TOUCH_BEGIN,o.onTouchBegin,o),o.sprite.addChild(g);var l=new egret.TextField;return l.text="play",l.anchorOffsetX=l.width/2,l.anchorOffsetY=l.height/2,l.x=o.sprite.width/2,l.y=o.sprite.height/2,o.sprite.addChild(l),o.text2=new egret.TextField,o.text2.text="please input your name and the game's secret",o.text2.width=r,o.sprite.addChild(o.text2),o}return __extends(i,t),i.prototype.onTouchBegin=function(){var t=this.txInput.text,i=this.txInput2.text;console.log("player:"+t);var n=this;if(t&&i){if(console.log(i),console.log(this.game_secret),base.API.Init("http://39.104.85.167:8105/api/"),base.API.call("find_players",{game_secret:n.game_secret,gameName:n.gameName}).then(function(e){console.log(e);var t=e.player_list,i=t.indexOf(n.txInput.text);n.isPlayer=i})["catch"](function(e){console.log(e)}),i!=this.game_secret)this.text2.text="please input the correct secret to enter the game";else if(-1==n.isPlayer)this.text2.text="you aren't invited !";else if(this.stage){console.log(33333);var r=new e.GamePageOne(i,n.inviter,t,n.gameName,this.stage.stageWidth,this.stage.stageHeight);this.stage.addChild(r),n.sprite.visible=!1}}else this.text2.text="you must input your name and the game's secret"},i.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},i.prototype.onTouchMove=function(){egret.log("onTouchMove")},i.prototype.onTouchTap=function(){egret.log("onTouchTap")},i}(egret.DisplayObjectContainer);e.EnterGame=t,__reflect(t.prototype,"game.EnterGame")}(game||(game={}));var game;!function(e){var t=function(e){function t(t,i,n,r,a,o){var s=e.call(this)||this;s.playerList=[],s.game_secret="",s.player="",s.gameName="",s.inviter="",s.stageWidth=0,s.stageHeight=0,s._touchStatus=!1,s._distance=new egret.Point,s.game_secret=t,s.player=n,s.gameName=r,s.inviter=i,s.stageWidth=a,s.stageHeight=o,s.sprite=new egret.Sprite,s.sprite.width=a,s.sprite.height=o,s.sprite.x=0,s.sprite.y=0,s.addChild(s.sprite),s.sprite.addEventListener(egret.Event.ADDED_TO_STAGE,s.getPlayList,s),s.rectShapeOne=new egret.Shape,s.rectShapeTwo=new egret.Shape,s.sprite.addChild(s.rectShapeOne),s.sprite.addChild(s.rectShapeTwo),s.drawRect();var h=new egret.TextField;return h.text="Carefulness",h.textAlign=egret.HorizontalAlign.CENTER,h.size=40,h.border=!0,h.width=280,h.borderColor=3825613,h.x=a-390,h.y=200,s.sprite.addChild(h),s._shape=new egret.Shape,s.sprite.addChild(s._shape),s.initGraphics(),s.charater2=new egret.TextField,s.sprite.addChild(s.charater2),s.initCharacter(a-390,s.stageHeight-150),s.rightIcon=new egret.Bitmap(RES.getRes("right_png")),s.rightIcon.width=100,s.rightIcon.height=100,s.rightIcon.anchorOffsetX=s.rightIcon.width/2,s.rightIcon.anchorOffsetY=s.rightIcon.height/2,s.rightIcon.x=a-50,s.rightIcon.y=o/2,s.addChild(s.rightIcon),s.rightIcon.touchEnabled=!0,s.rightIcon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,s.nextTouch,s),s.closeIcon=new egret.Bitmap(RES.getRes("close-circle_png")),s.closeIcon.width=40,s.closeIcon.height=40,s.closeIcon.anchorOffsetX=s.closeIcon.width/2,s.closeIcon.anchorOffsetY=s.closeIcon.height/2,s.closeIcon.x=a-30,s.closeIcon.y=150,s.closeIcon.touchEnabled=!0,s.closeIcon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,s.closeTip,s),s.addChild(s.closeIcon),s.tiptext=new egret.TextField,s}return __extends(t,e),t.prototype.closeTip=function(){this.tiptext.parent&&this.removeChild(this.tiptext)},t.prototype.nextTouch=function(){console.log(this.sprite.numChildren-this.playerList.length-5);var e=this.sprite.numChildren-this.playerList.length-5;this.playerList.length==e||(this.addChild(this.tiptext),this.tip(100,100,"Everyont must be graded!"))},t.prototype.tip=function(e,t,i){var n=this.tiptext;n.x=e,n.y=t,n.text=i,n.size=40,n.width=this.stageWidth},t.prototype.drawRect=function(){var e=this.rectShapeOne;e.graphics.beginFill(16711680,.5),e.graphics.drawRect(0,0,this.stageWidth+60,180),e.graphics.endFill();var t=this.rectShapeTwo;t.graphics.beginFill(16711680,.5),t.graphics.drawRect(0,this.stageHeight-100,this.stageWidth+60,200),t.graphics.endFill()},t.prototype.initGraphics=function(){var e=this._shape;e.graphics.lineStyle(2,16711935),e.graphics.moveTo(this.stageWidth-250,this.stageHeight-150),e.graphics.lineTo(this.stageWidth-250,240)},t.prototype.initCharacter=function(e,t){var i=this.charater2;i.text="Power",i.textAlign=egret.HorizontalAlign.CENTER,i.size=40,i.border=!0,i.width=280,i.borderColor=3825613,i.x=e,i.y=t},t.prototype.getPlayList=function(){base.API.Init("39.104.85.167:8105/api/");var e=this;base.API.call("get_player_list",{game_secret:e.game_secret,gameName:e.gameName,inviter:e.inviter}).then(function(t){var i=this;e.playerList=t.player_list,e.playerList.forEach(function(t,n,r){var a=new egret.TextField;a.text=t,a.textAlign=egret.HorizontalAlign.CENTER,a.size=30,a.lineSpacing=10,a.touchEnabled=!0,a.border=!0,a.width=100,a.borderColor=65280,a.x=70,a.y=300+50*n;var o=new egret.TextField;o.text="",o.size=30,o.border=!0,o.width=50,o.borderColor=65280,o.textAlign=egret.HorizontalAlign.CENTER,a.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(t){e._touchStatus=!0;var n=t.stageX,r=a.x,s=a.y,h=t.stageY;a.addEventListener(egret.TouchEvent.TOUCH_MOVE,function(t){if(e._touchStatus&&(a.x=t.stageX-n+r,a.y=t.stageY-h+s,o.parent&&o.parent.removeChild(o),a.x>e.stageWidth-250-100&&(a.x=e.stageWidth-250-100,console.log(a.x),console.log(a.y),a.y>240&&a.y<e.stageHeight-100))){o.x=a.x+100,o.y=a.y;var i=(e.stageHeight-150-240)/81;o.text=Math.ceil((o.y-240)/i).toString(),e.sprite.addChild(o)}},i)},i),a.addEventListener(egret.TouchEvent.TOUCH_END,function(t){e._touchStatus=!1,a.removeEventListener(egret.TouchEvent.TOUCH_MOVE,i.mouseMove,i)},i),e.sprite.addChild(a)})})},t.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},t.prototype.onTouchMove=function(){egret.log("onTouchMove")},t.prototype.onTouchTap=function(){egret.log("onTouchTap")},t}(egret.DisplayObjectContainer);e.GamePageOne=t,__reflect(t.prototype,"game.GamePageOne")}(game||(game={}));var game;!function(e){var t=function(t){function i(e,i){var n=t.call(this)||this;return n.game_list=[],n.stageWidth=0,n.stageHeight=0,n.stageWidth=e,n.stageHeight=i,n.sprite=new egret.Sprite,n.addChild(n.sprite),n.sprite.touchEnabled=!0,n.label=new egret.TextField,n.label.text="create game",n.label.height=80,n.label.width=180,n.label.anchorOffsetX=n.label.width/2,n.label.anchorOffsetY=n.label.height/2,n.label.x=n.stageWidth/2,n.label.y=n.stageHeight,n.label.touchEnabled=!0,n.label.background=!0,n.label.backgroundColor=16777215,n.label.border=!0,n.label.borderColor=65280,n.label.fontFamily="Arial",n.label.textColor=16711680,n.label.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.onTouchBegin,n),n.addChild(n.label),n.sprite.addEventListener(egret.Event.ADDED_TO_STAGE,n.getGameList,n),n}return __extends(i,t),i.prototype.getGameList=function(){base.API.Init("39.104.85.167:8105/api/");var e=this;base.API.call("get_game_list",{}).then(function(t){var i=this;this.game_list=t.gameList,this.game_list.forEach(function(t,n,r){var a=new egret.TextField;a.text=t[1],a.size=40,a.lineSpacing=10,a.touchEnabled=!0,a.border=!0,a.borderColor=65280,a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.x=e.stageWidth/2,a.y=100+50*n,a.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.startGame.bind(e,t[0],t[1],t[2]),i),e.sprite.addChild(a)})})},i.prototype.startGame=function(t,i,n){if(this.stage){var r=new e.EnterGame(t,i,n,this.stage.stageWidth,this.stage.stageHeight);this.stage.addChild(r),this.sprite.visible=!1,this.label.visible=!1}},i.prototype.onTouchBegin=function(){if(console.log(this.stage),this.stage){var t=new e.CreateGame(this.stage.stageWidth,this.stage.stageHeight);this.stage.addChild(t),this.sprite.visible=!1,this.label.visible=!1}},i.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},i.prototype.onTouchMove=function(){egret.log("onTouchMove")},i.prototype.onTouchTap=function(){egret.log("onTouchTap")},i}(egret.DisplayObjectContainer);e.Index=t,__reflect(t.prototype,"game.Index")}(game||(game={}));var game;!function(e){var t=function(t){function i(e,i,n,r,a){var o=t.call(this)||this;o.count=0,o.playerList=[],o.game_secret="",o.inviter="",o.gameName="",o.game_secret=e,o.inviter=i,o.gameName=n,o.sprite=new egret.Sprite,o.sprite.width=r,o.sprite.height=a,o.addChild(o.sprite);var s=new egret.Shape;s.graphics.beginFill(16774638),s.graphics.drawRect(0,0,300,50),s.graphics.endFill(),s.x=o.sprite.width/2+60,s.y=o.sprite.height/3,s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,o.sprite.addChild(s),o.txInput=new egret.TextField,o.txInput.type=egret.TextFieldType.INPUT,o.txInput.inputType=egret.TextFieldInputType.TEXT,o.txInput.width=290,o.txInput.height=50,o.txInput.x=o.sprite.width/2+60,o.txInput.y=o.sprite.height/3,o.txInput.anchorOffsetX=o.txInput.width/2,o.txInput.anchorOffsetY=o.txInput.height/2,o.txInput.textColor=855309,o.txInput.size=40;var h=new egret.TextField;h.text="input player:",h.x=o.sprite.width/2-280,h.y=o.sprite.height/3-18,h.size=30,o.sprite.addChild(h),o.sprite.addChild(o.txInput);var p=new egret.Shape;p.graphics.beginFill(52224),p.graphics.drawRect(0,0,200,50),p.graphics.endFill(),p.x=o.sprite.width/2,p.y=o.sprite.height/2,p.anchorOffsetX=p.width/2,p.anchorOffsetY=p.height/2,p.touchEnabled=!0,p.addEventListener(egret.TouchEvent.TOUCH_BEGIN,o.onTouchBegin,o),o.sprite.addChild(p);var c=new egret.TextField;c.text="invite",c.anchorOffsetX=c.width/2,c.anchorOffsetY=c.height/2,c.x=o.sprite.width/2,c.y=o.sprite.height/2,o.sprite.addChild(c);var g=new egret.Shape;g.graphics.beginFill(52224),g.graphics.drawRect(0,0,200,50),g.graphics.endFill(),g.x=o.sprite.width/2,g.y=o.sprite.height/2+100,g.anchorOffsetX=p.width/2,g.anchorOffsetY=p.height/2,g.touchEnabled=!0,g.addEventListener(egret.TouchEvent.TOUCH_BEGIN,o.onTouchBegin2,o),o.sprite.addChild(g);var l=new egret.TextField;return l.text="play",l.anchorOffsetX=l.width/2,l.anchorOffsetY=l.height/2,l.x=o.sprite.width/2,l.y=o.sprite.height/2+100,o.sprite.addChild(l),o.text2=new egret.TextField,o.text2.text="You have invited "+o.count+" players",o.text2.width=r,o.sprite.addChild(o.text2),o}return __extends(i,t),i.prototype.onTouchBegin=function(){var e=this,t=this.txInput.text;if(t){var i=0;if(this.playerList.forEach(function(n,r,a){console.log(n),n==t&&(e.text2.text="please dont invite the duplicate player !",i=1)}),console.log(i),0==i){this.playerList.push(t),this.count+=1,this.text2.text="You have invited "+this.count+" players";var n=this;base.API.Init("39.104.85.167:8105/api/"),base.API.call("create_player",{player_name:t,game_secret:n.game_secret,gameName:n.gameName,inviter:n.inviter}).then(function(e){console.log(e)})["catch"](function(e){console.log(e)})}}},i.prototype.onTouchBegin2=function(){if(this.playerList.length<3)this.text2.text="You must invite 10 players to start the game at least!";else{var t=this;if(this.stage){var i=new e.GamePageOne(t.game_secret,t.inviter,t.inviter,t.gameName,this.stage.stageWidth,this.stage.stageHeight);this.stage.addChild(i),t.sprite.visible=!1}}},i.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},i.prototype.onTouchMove=function(){egret.log("onTouchMove")},i.prototype.onTouchTap=function(){egret.log("onTouchTap")},i}(egret.DisplayObjectContainer);e.InviteFriends=t,__reflect(t.prototype,"game.InviteFriends")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.sprite=new egret.Sprite,t.sprite.graphics.beginFill(16711680),t.sprite.graphics.drawRect(0,0,100,100),t.sprite.graphics.endFill(),t.addChild(t.sprite),t.sprite.touchEnabled=!0,t.sprite.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTouchBegin,t),t.sprite.addEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,t),t.sprite.addEventListener(egret.TouchEvent.TOUCH_MOVE,t.onTouchMove,t),t.sprite.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTouchTap,t),t}return __extends(t,e),t.prototype.onTouchBegin=function(){this.sprite.visible=!1},t.prototype.onTouchEnd=function(){egret.log("onTouchEnd")},t.prototype.onTouchMove=function(){egret.log("onTouchMove")},t.prototype.onTouchTap=function(){egret.log("onTouchTap")},t}(egret.DisplayObjectContainer);e.LoadingScene=t,__reflect(t.prototype,"game.LoadingScene")}(game||(game={}));